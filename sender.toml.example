# tunnel-rs sender configuration example
#
# Usage: tunnel-rs sender -c sender.toml
#        tunnel-rs sender --default-config
#
# Mode is inferred from the 'mode' field below.
# CLI arguments take precedence over config file values.
#
# This file shows iroh-default mode. See commented sections below for other modes.

# Required: validates config matches CLI command
role = "sender"
mode = "iroh-default"  # or "iroh-manual", "custom", or "nostr"

# Shared options
# source is required at runtime (via config or CLI)
source = "tcp://127.0.0.1:22"

[iroh-default]
# Path to secret key file for persistent identity
# Generate with: tunnel-rs generate-secret --output sender.key
secret_file = "./sender.key"

# Custom relay server URL(s) for failover
# If not provided, uses iroh's default public relays
relay_urls = [
    "https://relay1.example.com",
    "https://relay2.example.com",
]

# Force all connections through relay (disables direct P2P)
relay_only = false

# Custom DNS server URL for peer discovery
# Used with self-hosted iroh-dns-server for fully independent operation
# NOTE: URL must include the /pkarr path
# dns_server = "https://dns.example.com/pkarr"

# [iroh-manual]
# # Set to [] to disable STUN entirely
# stun_servers = [
#     "stun.l.google.com:19302",
#     "stun1.l.google.com:19302",
#     "stun.services.mozilla.com:3478",
# ]

# [custom]
# # Set to [] to disable STUN entirely
# stun_servers = [
#     "stun.l.google.com:19302",
#     "stun1.l.google.com:19302",
#     "stun.services.mozilla.com:3478",
# ]

# [nostr]
# # Your Nostr private key (generate with: tunnel-rs generate-nostr-key)
# nsec = "nsec1..."
#
# # Peer's Nostr public key
# peer_npub = "npub1..."
#
# # Nostr relay URLs (defaults to public relays if not specified)
# relays = [
#     "wss://relay.damus.io",
#     "wss://nos.lol",
#     "wss://relay.nostr.band",
#     "wss://relay.primal.net",
#     "wss://nostr.mom",
#     "wss://relay.snort.social",
# ]
#
# # Set to [] to disable STUN entirely
# stun_servers = [
#     "stun.l.google.com:19302",
#     "stun1.l.google.com:19302",
#     "stun.services.mozilla.com:3478",
# ]
