# tunnel-rs sender configuration example
#
# Usage: tunnel-rs sender --config sender.toml
#
# All options can be overridden by CLI arguments.
# CLI arguments take precedence over config file values.

# Protocol to tunnel: "tcp" or "udp"
protocol = "tcp"

# Manual mode (bypass discovery/relays)
manual = false

# STUN servers for manual mode (optional)
stun_servers = [
    "stun.l.google.com:19302",
    "stun1.l.google.com:19302",
    "stun.services.mozilla.com:3478",
]

# Target address to forward traffic to
target = "127.0.0.1:22"

# Path to secret key file for persistent identity (optional)
# Generate with: tunnel-rs generate-secret --output sender.key
secret_file = "./sender.key"

# Custom relay server URL(s) for failover
# If not provided, uses iroh's default public relays
relay_urls = [
    "https://relay1.example.com",
    "https://relay2.example.com",
]

# Force all connections through relay (disables direct P2P)
# Requires relay_urls to be specified
relay_only = false

# Require direct P2P connections only (reject relay connections)
# Waits a few seconds for hole-punching before rejecting
# Mutually exclusive with relay_only
direct_only = false

# Optional manual secret key (reserved for future use)
# manual_secret_key = ""

# Custom DNS server URL for peer discovery (optional)
# Used with self-hosted iroh-dns-server for fully independent operation
# Requires secret_file for publishing peer addresses
# NOTE: URL must include the /pkarr path
# dns_server = "https://dns.example.com/pkarr"
