# tunnel-rs sender configuration example
#
# Usage: tunnel-rs sender -c sender.toml iroh-default
#        tunnel-rs sender --default-config iroh-default
#
# CLI arguments take precedence over config file values.

# Required: validates config matches CLI command
role = "sender"
mode = "iroh-default"  # or "iroh-manual", "custom"

# Shared options (apply to all modes)
protocol = "tcp"  # "tcp" or "udp"
target = "127.0.0.1:22"

# STUN servers for iroh-manual and custom modes
stun_servers = [
    "stun.l.google.com:19302",
    "stun1.l.google.com:19302",
    "stun.services.mozilla.com:3478",
]

# iroh-default mode options
[iroh.default]
# Path to secret key file for persistent identity
# Generate with: tunnel-rs generate-secret --output sender.key
secret_file = "./sender.key"

# Custom relay server URL(s) for failover
# If not provided, uses iroh's default public relays
relay_urls = [
    "https://relay1.example.com",
    "https://relay2.example.com",
]

# Force all connections through relay (disables direct P2P)
relay_only = false

# Custom DNS server URL for peer discovery
# Used with self-hosted iroh-dns-server for fully independent operation
# NOTE: URL must include the /pkarr path
# dns_server = "https://dns.example.com/pkarr"
