# tunnel-rs client configuration example
#
# Usage: tunnel-rs client -c client.toml
#        tunnel-rs client --default-config
#
# Mode is inferred from the 'mode' field below.
# CLI arguments take precedence over config file values.
# This file is iroh-only. For ICE modes, see client_ice.toml.example.

# Required: validates config matches CLI command
role = "client"
mode = "iroh"

[iroh]
# EndpointId of the server to connect to (required for iroh)
server_node_id = "2xnbkpbc7izsilvewd7c62w7wnwziacmpfwvhcrya5nt76dqkpga"

# ============================================================================
# Authentication (REQUIRED)
# ============================================================================
# Token provided by the server admin for authentication
auth_token = "tunnel-abc123def456"

# Or use a file containing the token
# auth_token_file = "~/.config/tunnel-rs/token.txt"

# Source address to request from server (REQUIRED for iroh mode)
# Must be in server's allowed_sources list (--allowed-tcp or --allowed-udp)
request_source = "tcp://127.0.0.1:22"

# Local address to listen on (REQUIRED for iroh mode)
target = "127.0.0.1:2222"

# Custom relay server URL(s) for failover
# Must match the server's relay configuration
relay_urls = [
    "https://relay1.example.com",
    "https://relay2.example.com",
]

# Custom DNS server URL for peer discovery
# Must match the server's dns_server configuration
# NOTE: URL must include the /pkarr path
# dns_server = "https://dns.example.com/pkarr"

# [Experimental] SOCKS5 proxy for relay connections
# Tor support is experimental and might not work reliably.
# REQUIRED: If relay_urls contain .onion addresses, MUST use socks5h:// for DNS through proxy
# OPTIONAL: For non-.onion relays, can use socks5:// or socks5h://
# Use with Tor: socks5h://127.0.0.1:9050
# socks5_proxy = "socks5h://127.0.0.1:9050"
