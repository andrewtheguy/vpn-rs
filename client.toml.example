# tunnel-rs client configuration example
#
# Usage: tunnel-rs client -c client.toml
#        tunnel-rs client --default-config
#
# Mode is inferred from the 'mode' field below.
# CLI arguments take precedence over config file values.
# This file is iroh-only. For ICE modes, see client_ice.toml.example.

# Required: validates config matches CLI command
role = "client"
mode = "iroh"

[iroh]
# Server's EndpointId to connect to (required for iroh)
# Get this from the server operator (shown when server starts, or via show-iroh-node-id)
server_node_id = "2xnbkpbc7izsilvewd7c62w7wnwziacmpfwvhcrya5nt76dqkpga"

# ============================================================================
# Authentication (REQUIRED)
# ============================================================================
# Token provided by the server admin for authentication
# Token format: exactly 18 characters (i + 16 body chars + checksum)
# Generate with: tunnel-rs generate-token
#
# IMPORTANT: Use 'auth_token' or 'auth_token_file' (NOT 'secret' or 'secret_file'
# which are server-only options for persistent identity)
#
# NOTE: Use either auth_token OR auth_token_file, not both.
auth_token = "iXXXXXXXXXXXXXXXXX"  # Replace with real token from generate-token

# Or use a file containing the token (one token, no comments)
# NOTE: Use either auth_token OR auth_token_file, not both.
# auth_token_file = "~/.config/tunnel-rs/token.txt"

# Source address to request from server (required if not specified via CLI --source)
# Must be in server's allowed_sources list (--allowed-tcp or --allowed-udp)
# request_source = "tcp://127.0.0.1:22"

# Local address to listen on (required if not specified via CLI --target)
# target = "127.0.0.1:2222"

# Custom relay server URL(s) for failover
# Must match the server's relay configuration
relay_urls = [
    "https://relay1.example.com",
    "https://relay2.example.com",
]

# Custom DNS server URL for peer discovery
# Must match the server's dns_server configuration
# NOTE: URL must include the /pkarr path
# dns_server = "https://dns.example.com/pkarr"

# ============================================================================
# Transport Tuning (Optional)
# ============================================================================
# Fine-tune QUIC transport layer for performance optimization.
# All values have sensible defaults - only configure if needed.

[iroh.transport]
# Congestion controller algorithm (default: cubic)
# - cubic: Loss-based, widely deployed, best for general internet
# - bbr: Model-based, may perform better on high-bandwidth/high-latency links
# - newreno: Classic TCP-like, most conservative
# congestion_controller = "cubic"

# QUIC receive window in bytes (default: 2097152 = 2MB)
# Controls flow control - larger values allow more in-flight data
# Valid range: 1024 (1KB) to 16777216 (16MB)
# receive_window = 2097152

# QUIC send window in bytes (default: 2097152 = 2MB)
# Controls how much data can be sent before acknowledgment
# Valid range: 1024 (1KB) to 16777216 (16MB)
# send_window = 2097152
